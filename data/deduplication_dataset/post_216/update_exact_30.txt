지난 한 해 동안 수백 명의 사람들과 오피스 아워(office hours)를 진행했습니다. 포춘 500대 기업 팀, 독립 개발자, AI로 업무를 확장하려는 컨설턴트 등 다양한 분들이었습니다. 그리고 저는 똑같은 불만을 다른 모습으로 계속 들었습니다. "왜 이게 작동하지 않는지 모르겠어요. 저는 분명하게 말하고 있다고 생각하는데요." "환각 현상(hallucinations)에 대한 해결책들을 시도해봤는데, 보세요, 작동하지 않아요!" "프롬프트(prompt)를 계속 바꿔 말해도 아무것도 변하지 않아요." 점차 깨달았습니다. AI 사용에는 끈질기고 초기 해결 시도를 거부하는 일련의 문제들이 있다는 것을요. 이 문제들은 지속되는 경향이 있고, 그것이 사람들이 저와 오피스 아워를 갖게 되는 이유입니다. 흥미로운 점은 제가 계속해서 똑같은 문제들을 다른 모습으로 반복해서 보았다는 것입니다. 제 노트를 살펴본 결과, 엔지니어와 비개발자 모두에게 나타나는 여섯 가지 반복적인 문제 유형을 발견했습니다. 그래서 좀 더 깊이 파고들었고, 이 여섯 가지 문제들이 OpenAI 웹사이트의 29,000개 포럼 질문에 대한 연구를 포함하여 모든 곳에서 나타나고 있다는 것을 알게 되었습니다. 이제 흥미로워집니다. 왜냐하면 본질적으로 여섯 가지 LLM 행동 '질병'(LLM behavioral ‘diseases’)이 있고, 이 모든 것들은 처음에는 치료하기 어렵기 때문입니다. 제 임무는 비개발자 또는 엔지니어로서 이러한 지속적인 문제에 대한 성공 확률을 극대화하기 위해 빠르고 쉽게 (복사-붙여넣기처럼) 적용할 수 있는 일련의 정교한 치료법을 찾아내는 것이었습니다. 또한, 저는 이 문제들에 이름을 붙여야 했습니다! 일부는 잘 알려진 문제점(예: 환각 현상(hallucinations))이고 다른 일부는 널리 논의되지 않지만, 우리가 대화하고 함께 발전하기 위해서는 모두 명확한 이름이 필요했습니다. 다음은 여섯 가지 문제입니다.

대규모 언어 모델(LLM)의 발전은 놀랍지만, 실제 세계에 적용하려 할 때 우리는 종종 예상치 못한 장애물에 부딪힙니다. 단순한 챗봇을 넘어 복잡한 에이전트 시스템이나 자동화된 워크플로우를 구축하려는 시도가 늘면서, 이러한 문제들은 단순한 불편함을 넘어 비즈니스 실패로 이어질 수 있는 치명적인 결함이 되기도 합니다. 특히 엔터프라이즈 환경에서는 LLM의 예측 불가능성이 큰 위험으로 작용하며, 개발자와 사용자 모두에게 좌절감을 안겨줍니다. 이러한 '질병'들은 LLM의 본질적인 특성에서 비롯되지만, 체계적인 접근 방식을 통해 충분히 관리하고 극복할 수 있습니다.

**불충분한 명세(Under-specification)** — 단어가 많거나 적을 때 모두 해가 될 수 있는 경우
**재생성 루프(Regeneration Loops)** — 건드리면 탑이 무너지는 경우
**다단계 추론 붕괴(Multi-Step Reasoning Collapse)** — 생각한다고 말하지만 사실은 거짓말을 하는 경우
**환각 유발 요인(Hallucination Triggers)** — 환각 현상(hallucinations)의 불쾌한 원인
**일관성 편차(Consistency Drift)** — 두 번 연속 같은 결과를 얻을 수 없는 경우
**컨텍스트 과부하(Context Overload)** — 모든 단어를 추가하는 것이 나쁜 생각이었던 경우

이 여섯 가지 문제들은 LLM 기반 애플리케이션의 신뢰성과 효율성을 저해하는 주된 원인입니다. 예를 들어, **불충분한 명세**는 금융 보고서 요약과 같은 중요한 작업에서 모호한 지침으로 인해 LLM이 중요한 세부 정보를 누락하거나 잘못 해석하게 만들 수 있습니다. **재생성 루프**는 자동화된 고객 서비스 에이전트가 특정 시나리오에서 무한히 반복되는 답변을 제공하여 사용자 경험을 심각하게 저해할 때 발생합니다. **다단계 추론 붕괴**는 복잡한 법률 문서 분석이나 코드 디버깅과 같이 여러 단계를 거쳐야 하는 문제에서 LLM이 중간 단계의 논리를 건너뛰거나 잘못된 가정을 하여 최종 결과의 신뢰도를 떨어뜨리는 경우를 말합니다. **환각 유발 요인**은 특히 RAG(Retrieval Augmented Generation) 시스템에서 잘못된 외부 정보가 주입되거나, 모델이 스스로 지어낸 정보가 사실처럼 제시될 때 심각한 문제가 됩니다. **일관성 편차**는 동일한 요청에도 불구하고 LLM이 매번 다른 형식이나 내용의 응답을 생성하여, 자동화된 후처리 시스템의 오류를 유발하거나 사용자에게 혼란을 줄 수 있습니다. 마지막으로 **컨텍스트 과부하**는 LLM의 토큰(token) 한계를 넘어서는 방대한 정보를 처리하려 할 때 발생하며, 이는 성능 저하뿐만 아니라 불필요한 비용 증가로 이어질 수 있습니다.

이러한 문제들은 단순히 프롬프트 몇 줄을 수정하는 것으로는 해결하기 어렵습니다. LLM의 내부 작동 방식과 한계를 이해하고, 이를 보완할 수 있는 구조적인 접근 방식이 필요합니다. 더 이상 '프롬프트 엔지니어링'은 예술의 영역에 머물지 않고, 'LLM 엔지니어링'이라는 이름으로 체계적인 설계 원칙과 개발 모범 사례를 요구하는 공학의 영역으로 진화하고 있습니다. 저는 각 질병에 대한 완전한 치료 계획을 만들었습니다. 단일 해결책이 아닌, ChatGPT에 입력하든 API로 구축하든 작동하는 다층적인 접근 방식입니다. 여섯 가지 문제 각각에 대해 다음을 얻을 수 있습니다.

**채팅 해결책(The Chat Fix)** — 오늘날 어떤 채팅 인터페이스에든 복사-붙여넣기할 수 있는 산문 템플릿입니다. 코딩 필요 없음, 설정 필요 없음, 매우 쉽습니다.
**고급 해결책(The Advanced Fix)** — 규칙을 프로그래밍 방식으로 강제 적용하는 JSON 스키마(JSON schemas) 및 API 구현(API implementations)입니다. 도구를 구축하거나 워크플로우를 자동화하는 엔지니어의 경우, 이는 프로덕션 환경에서 프롬프트(prompt)를 보호하기 위한 볼링 레인 범퍼 역할을 합니다.
**작동 방식을 볼 수 있는 실제 예시** — 모든 해결책에는 제품 이메일, 공급업체 선정, 고객 조사, 코드 디버깅, 주간 보고서, 계약 분석 등 다양한 구체적인 시나리오가 포함됩니다. 일반적인 "시를 써줘"와 같은 예시가 아니라 실제 작업에 적용된 정확한 프롬프트 구조를 볼 수 있습니다.
**좋은 징후 / 나쁜 징후 진단(Good Signs / Bad Signs Diagnostics)** — 해결책이 작동했는지 알려주는 체크리스트입니다. "초안이 80% 이상 완성됨" 대 "여전히 길이가 틀림"과 같이, 해결했는지 추측할 필요가 없도록 관찰 가능한 신호를 제공합니다.
**예상치 못한 반전(The Twist You Didn’t See Coming)** — 각 문제에는 모델이 왜 이런 식으로 작동하는지 파고드는 내용이 포함됩니다. 말하자면, 질병의 근본 원인입니다. 이것들은 팁이 아니라 문제가 존재하는 구조적 이유입니다.

각 해결책은 특정 문제 유형에 최적화된 전략을 제공합니다. **채팅 해결책**은 시스템 프롬프트(system prompt)를 활용하여 LLM의 페르소나와 지시 사항을 명확히 정의하고, 퓨샷 프롬프팅(few-shot prompting)을 통해 원하는 출력 형식을 미리 보여줌으로써 불충분한 명세와 일관성 편차 문제를 완화합니다. **고급 해결책**은 단순히 프롬프트 조정에 그치지 않고, LLM을 활용하는 애플리케이션의 아키텍처 자체를 강화합니다. 최신 LLM의 함수 호출(function calling) 기능이나 도구 사용(tool use) 기능을 활용하여 LLM이 외부 시스템과 상호작용하게 하거나, RAG(검색 증강 생성) 시스템을 구축하여 최신 정보를 검색하도록 함으로써 환각 현상을 줄이고 컨텍스트 과부하를 관리합니다. 또한, JSON 스키마를 통해 출력 형식을 강제하여 일관성을 확보하고, 가드레일(guardrails) 라이브러리를 사용하여 모델의 행동을 제약함으로써 안전하고 예측 가능한 결과를 보장합니다.

**작동 방식을 볼 수 있는 실제 예시**는 단순히 학술적인 프롬프팅 기법을 넘어서, 실제 비즈니스 시나리오, 예를 들어 복잡한 의료 기록 요약, 법률 계약서의 핵심 조항 추출, 또는 소프트웨어 개발 과정에서 버그 리포트의 자동 분류와 같은 고부가가치 작업에 이러한 해결책들이 어떻게 적용될 수 있는지 보여줍니다. **좋은 징후 / 나쁜 징후 진단**은 단순한 결과 확인을 넘어, LLM의 응답을 정량적으로 평가할 수 있는 메트릭과 자동화된 테스트 프레임워크를 도입하는 중요성을 강조합니다. 이는 LLM 애플리케이션의 지속적인 통합 및 배포(CI/CD) 파이프라인에 필수적입니다. **예상치 못한 반전**은 LLM이 왜 특정 방식으로 작동하는지에 대한 근본적인 이해를 돕습니다. 트랜스포머 아키텍처의 어텐션 메커니즘, 토큰화 과정의 한계, 그리고 훈련 데이터의 편향성 등이 어떻게 이러한 '질병'들을 유발하는지 통찰력을 제공하여, 보다 근본적인 해결책을 모색할 수 있도록 돕습니다.

추가적으로:
**메타 진단 프롬프트(The Meta-Diagnostic Prompt)** — 여섯 가지 문제 모두에 대해 고장 난 프롬프트(prompt)를 분석하고, 어떤 문제에 직면했는지 알려주며, 적용할 특정 해결책을 제공하는 하나의 마스터 프롬프트(master prompt)입니다. 마치 오피스 아워(office hours)에서 얻은 패턴 인식(pattern recognition)을 주머니에 넣고 다니는 것과 같습니다. 예를 들어, 사용자가 "이메일 초안이 항상 너무 길거나 짧아요"라고 불만을 제기하면, 메타 진단 프롬프트는 이를 '불충분한 명세'로 진단하고, 적절한 시스템 프롬프트 템플릿과 출력 길이 제어 기법을 제안합니다.
**완전한 도구 모음(The Full Arsenal)**:
*   기억하기 쉬운 방식으로 이것들이 무엇인지에 대한 정말 명확한 설명
*   25가지 작동하는 '닥터 프롬프트'(각 문제에 대한 기본 + 고급)
*   추측을 구조로 대체하는 의사결정 프레임워크(decision frameworks)
*   보존 경계(preservation boundaries), 신뢰도 요구 사항(confidence requirements), 유효성 검사 게이트(validation gates)와 같이 이러한 문제를 해결하는 고급 기술에 대한 간소화되고 실행 가능한 지침 (이것들을 고급 치료법을 쉽게 얻는 방법이라고 생각하세요)
*   어떤 새로운 AI 기능(구조화된 출력(structured outputs), 추론 제어(reasoning controls), 검증 필드(verification fields))이 실제로 6가지 문제 중 어떤 것을 해결하는지에 대한 명확한 설명

이 도구 모음은 LLM 애플리케이션 개발의 복잡성을 줄이고, 시행착오를 최소화하는 데 중점을 둡니다. 특히 프롬프트 체이닝(prompt chaining), 에이전트 기반 워크플로우(agentic workflows), 그리고 인간 개입(Human-in-the-loop, HITL) 시스템의 설계 원칙을 포함하여, LLM의 한계를 보완하고 강점을 극대화하는 방법을 제시합니다. 이러한 접근 방식은 단순한 '팁'이 아니라, LLM의 동작을 예측하고 제어하기 위한 체계적인 진단 및 치료 시스템입니다.

아주 오래전 저는 나무 관리 분야에서 일했는데, 수목 관리사로서 가장 끔찍한 것 중 하나는 곰팡이가 핀 나무를 보는 것입니다. 치료하기 어렵고, 시스템적인 문제이며, 여러 접근 방식이 필요합니다. 음, 여기서도 마찬가지입니다! 이러한 지속적인 문제들 중 일부는 당신의 '나무'(당신의 AI 챗봇(chatbot))가 질병에 걸린 것처럼 느껴질 수 있습니다. 제가 좋아하는 말처럼: 당황하지 마세요! 제 목표는 당신이 건강해지고 생산적이고 협력적인 AI-인간 관계로 돌아갈 수 있는 도구를 제공하는 것입니다.

LLM 기술은 계속 발전하고 있으며, 새로운 모델과 기능이 끊임없이 출시되고 있습니다. 하지만 이 여섯 가지 '질병'들은 LLM의 본질적인 특성에서 비롯되므로, 기술 발전과 무관하게 지속적으로 마주하게 될 과제입니다. 중요한 것은 이러한 문제들을 인식하고, 진단하며, 적절한 '치료법'을 적용하여 LLM 기반 시스템의 견고함과 신뢰성을 확보하는 것입니다. 이 게시물에서 제시하는 도구와 프레임워크를 통해, 여러분도 LLM과의 상호작용에서 겪는 어려움을 극복하고, 잠재력을 최대한 발휘할 수 있기를 바랍니다.

프롬프트(prompt) 닥터로부터 행복하고 (건강한) 프롬프팅(prompting)을!
구독자는 이 모든 뉴스레터를 받습니다! 구독하기